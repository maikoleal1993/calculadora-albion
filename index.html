<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Calculadora Crafteo Comidas - Albion</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Firma Superior -->
<div style="
  position: fixed;
  top: 8px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.6);
  padding: 6px 14px;
  border-radius: 6px;
  font-size: 0.85rem;
  font-weight: bold;
  color: #ffb347;
  z-index: 9999;
  text-shadow: 0 0 4px #000;
">
  Creado por BLOODYPHANTOM
</div>


<style>
body {

   <!-- Banner publicitario visible arriba -->
  <div style="text-align:center; margin-bottom:16px;">
    <script async src="https://www.effectivegatecpm.com/kg14cgny?key=8d34b2ce801575b631d190d76c6bc47c"></script>
  </div>

  <div class="container">
    <!-- Tu calculadora -->
  </div>

</body>
  margin: 0;
  padding: 0;
  height: 100vh;
  font-family: 'Montserrat', sans-serif;

  /* Fondo con la imagen + overlay degradado */
  background:
    linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.6)),
    url("778611.jpg") center/cover no-repeat fixed;

  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.container {
  width: 100%;
  max-width: 520px;
  padding: 24px 28px;
  border-radius: 20px;

  /* Glassmorphism */
  background: rgba(20, 20, 20, 0.35);
  backdrop-filter: blur(12px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.45);

  border: 1px solid rgba(255, 255, 255, 0.1);
}

button {
  width: 100%;
  padding: 12px;
  margin-top: 12px;
  background: linear-gradient(135deg,#f90,#ffb347);
  border: none;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  color: #222;
}
button:hover { background: #ffb347; }
input, select {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border-radius: 8px;
  border: none;
  background: #333;
  color: #fff;
  font-size: 0.95rem;
}
label {
  margin-top: 12px;
  display: block;
  font-size: 0.9rem;
}
.result {
  background: rgba(0,0,0,0.65);
  padding: 14px;
  margin-top: 14px;
  border-radius: 10px;
  font-size: 0.95rem;
  color: #fff !important;        /* Texto blanco */
  text-shadow: 0 0 4px #000;      /* Sombra para mayor legibilidad */
  border: 1px solid #444;         /* borde sutil para definir el panel */
}

.hidden { display: none; }
</style>
</head>

<body>

<div class="container">

  <h2 style="text-align:center;color:#ffb347;">游빑 Calculadora crafteo de comidas</h2>

  <button id="btnCantidad">游늷 Calcular por cantidad</button>
  <button id="btnInventario">游닍 Calcular seg칰n inventario</button>

  <!-- SECCI칍N 1 -->
  <div id="section-cantidad" class="section">
    <label>Comida</label>
    <select id="comida1">
      <option value="tortilla">Tortilla de cerdo</option>
      <option value="pastel">Pastel de cerdo</option>
      <option value="guiso">Guiso de ternera</option>
    </select>

    <label>Variante</label>
    <select id="variante1">
      <option value="0">Plana</option>
      <option value="1">.1</option>
      <option value="2">.2</option>
      <option value="3">.3</option>
      <option value="a0">Avaloniana plana</option>
      <option value="a1">Avaloniana .1</option>
      <option value="a2">Avaloniana .2</option>
      <option value="a3">Avaloniana .3</option>
    </select>

    <label>Cantidad a fabricar (m칰ltiplos de 10)</label>
    <input type="number" id="cantFabricar1" placeholder="Ej: 10">

    <label>% Devoluci칩n</label>
    <input type="number" id="porDev1" placeholder="Ej: 35">

    <button onclick="calcularPorCantidad()">游댌 Calcular ingredientes</button>
    <div id="resultado1" class="result"></div>
  </div>

  <!-- SECCI칍N 2 -->
  <div id="section-inventario" class="section hidden">

    <label>Comida</label>
    <select id="comida2">
      <option value="tortilla">Tortilla de cerdo</option>
      <option value="pastel">Pastel de cerdo</option>
      <option value="guiso">Guiso de ternera</option>
    </select>

    <label>Variante</label>
    <select id="variante2">
      <option value="0">Plana</option>
      <option value="1">.1</option>
      <option value="2">.2</option>
      <option value="3">.3</option>
      <option value="a0">Avaloniana plana</option>
      <option value="a1">Avaloniana .1</option>
      <option value="a2">Avaloniana .2</option>
      <option value="a3">Avaloniana .3</option>
    </select>

    <label>% Devoluci칩n</label>
    <input type="number" id="porDev2" placeholder="Ej: 35">

    <div id="invInputs"></div>

    <button onclick="calcularMaximo()">游댝 쮺u치ntas puedes craftear?</button>
    <div id="resultado2" class="result"></div>

  </div>

</div>

<script>
<script>
// === Datos base de comidas ===
const comidas = {
  tortilla: {
    base: { "Fardos de ma칤z": 36, "Carne de cerdo": 72, "Huevos de ganso": 18 }
  },
  pastel: {
    base: { "Fardos de ma칤z": 18, "Harina": 36, "Carne de cerdo": 72, "Leche de oveja": 18 }
  },
  guiso: {
    base: { "Calabazas": 36, "Pan": 36, "Carne de ternera": 72 }
  }
};

const salsas = {
  1: "Salsa de pescado b치sica",
  2: "Salsa de pescado extravagante",
  3: "Salsa de pescado especial"
};

const energiaAvalon = "Energ칤a avaloniana";

// === Genera inputs de inventario seg칰n lo seleccionado ===
function generarInventarioInputs() {
  const cont = document.getElementById("inventarioInputs");
  cont.innerHTML = "";

  const comida = document.getElementById("comidaInv").value;
  const variante = document.getElementById("varianteInv").value;

  // Ingredientes base
  for (let ing in comidas[comida].base) {
    let inp = document.createElement("input");
    inp.type = "number";
    inp.placeholder = `${ing} que tienes`;
    inp.id = "inv_" + ing;
    cont.appendChild(inp);
  }

  // Si es variante Avaloniana
  if (variante.startsWith("a")) {
    let invE = document.createElement("input");
    invE.type = "number";
    invE.placeholder = `${energiaAvalon} que tienes`;
    invE.id = "inv_" + energiaAvalon;
    cont.appendChild(invE);

    let idx = parseInt(variante.charAt(1));
    if (idx > 0) {
      let invS = document.createElement("input");
      invS.type = "number";
      invS.placeholder = `${salsas[idx]} que tienes`;
      invS.id = "inv_" + salsas[idx];
      cont.appendChild(invS);
    }
  } else {
    let idx = parseInt(variante);
    if (idx > 0) {
      let invS = document.createElement("input");
      invS.type = "number";
      invS.placeholder = `${salsas[idx]} que tienes`;
      invS.id = "inv_" + salsas[idx];
      cont.appendChild(invS);
    }
  }
}

// Detecta cuando cambia selecci칩n para regenerar inputs
document.getElementById("comidaInv").addEventListener("change", generarInventarioInputs);
document.getElementById("varianteInv").addEventListener("change", generarInventarioInputs);

// Llama la primera vez para generar inputs iniciales
generarInventarioInputs();

// === C치lculo seg칰n inventario ===
function calcularInventario() {
  const comida = document.getElementById("comidaInv").value;
  const variante = document.getElementById("varianteInv").value;
  const dev = parseFloat(document.getElementById("devInv").value) / 100;

  // Ingredientes totales por unidad
  let reqPerUnit = {};

  for (let ing in comidas[comida].base) {
    reqPerUnit[ing] = comidas[comida].base[ing];
  }

  if (variante.startsWith("a")) {
    reqPerUnit[energiaAvalon] = 90;
    let idx = parseInt(variante.charAt(1));
    if (idx > 0) reqPerUnit[salsas[idx]] = 90;
  } else {
    let idx = parseInt(variante);
    if (idx > 0) reqPerUnit[salsas[idx]] = 90;
  }

  // Lee inventario ingresado
  let inv = {};
  for (let ing in reqPerUnit) {
    let val = parseFloat(document.getElementById("inv_" + ing).value) || 0;
    inv[ing] = val;
  }

  // Calcula cu치ntas unidades puedes fabricar en m칰ltiplos de 10
  let maxUnits = Infinity;

  for (let ing in reqPerUnit) {
    // Ingredientes necesarios netos por unidad
    // Primero calculamos neto por 1 y luego multiplicamos por 10
    let neededFor10 = reqPerUnit[ing] * 10;
    let netPer10 = neededFor10 * (1 - dev);

    // Con tu inventario real, cu치ntos bloques de 10 puedes hacer
    let possible = Math.floor(inv[ing] / netPer10);

    if (possible < maxUnits) maxUnits = possible;
  }

  if (!isFinite(maxUnits)) maxUnits = 0;

  let resultCount = maxUnits * 10;

  // Mostrar resultado
  let out = `<b>游녤 Puedes craftear hasta:</b> <b>${resultCount}</b> comidas (m칰ltiplos de 10)<br><br>`;

  for (let ing in reqPerUnit) {
    let neededFor10 = reqPerUnit[ing] * 10;
    let netPer10 = neededFor10 * (1 - dev);
    let used = netPer10 * maxUnits;
    let diff = inv[ing] - used;

    if (diff >= 0) out += `${ing}: 游릭 Sobra ${diff.toFixed(2)}<br>`;
    else out += `${ing}: 游댮 Te falta ${Math.abs(diff).toFixed(2)}<br>`;
  }

  document.getElementById("resultadoInv").innerHTML = out;
}
</script>


</script>

  <div class="result" id="resultado2"></div>

<div style="text-align:center; margin-top:24px;">
  <script async src="https://www.effectivegatecpm.com/kg14cgny?key=8d34b2ce801575b631d190d76c6bc47c"></script>
</div>


</body>
</html>










