<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora Albion Online</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  padding:0;
  background:linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.8));
  font-family:Montserrat,sans-serif;
  color:#fff;
  display:flex;
  justify-content:center;
  padding-top:40px;
}
.container{
  width:100%;
  max-width:760px;
  background:rgba(25,25,25,.9);
  border-radius:14px;
  padding:22px;
}
.menu{
  display:flex;
  gap:10px;
  margin-bottom:20px;
}
.menu button{
  flex:1;
  padding:10px;
  background:#ffb347;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}
h2{text-align:center;color:#ffb347}
button{
  width:100%;
  padding:10px;
  margin-top:10px;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
  background:#ffb347;
}
input,select{
  width:100%;
  padding:8px;
  margin-top:6px;
  border-radius:6px;
  border:none;
  background:#333;
  color:#fff;
}
label{display:block;margin-top:10px}
.result{
  background:#111;
  padding:12px;
  border-radius:8px;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="container">

<div class="menu">
  <button onclick="mostrarSeccion('calc')">üßÆ Calculadora</button>
  <button onclick="mostrarSeccion('ciudades')">üèôÔ∏è Ciudades</button>
</div>

<!-- ================= CIUDADES ================= -->
<section id="ciudades" style="display:none">
<h2>üèôÔ∏è Bonos por Ciudad</h2>

<select id="ciudadSelect" onchange="mostrarBonoCiudad()">
<option value="">-- Elegir ciudad --</option>
<option value="bridgewatch">Bridgewatch</option>
<option value="lymhurst">Lymhurst</option>
<option value="fortsterling">Fort Sterling</option>
<option value="martlock">Martlock</option>
<option value="thetford">Thetford</option>
<option value="caerleon">Caerleon</option>
<option value="brecilien">Brecilien</option>
</select>

<div id="resultadoCiudad" class="result"></div>
</section>

<!-- ================= CALCULADORA ================= -->
<section id="calc">

<h2>üßÆ Calculadora de Crafteo</h2>

<button id="btnCant">Calcular por cantidad</button>
<button id="btnInv">Calcular seg√∫n inventario</button>

<!-- ===== CANTIDAD ===== -->
<div id="section-cantidad">
<label>Comida</label>
<select id="comidaCant">
<option value="tortilla">Tortilla</option>
<option value="pastel">Pastel</option>
<option value="guiso">Guiso</option>
</select>

<label>Cantidad</label>
<input type="number" id="cantidadCant">

<label>% Devoluci√≥n</label>
<input type="number" id="devolucionCant">

<button onclick="calcularCantidad()">Calcular</button>
<div id="resultadoCant" class="result"></div>
</div>

<!-- ===== INVENTARIO ===== -->
<div id="section-inventario" style="display:none">
<label>Comida</label>
<select id="comidaInv" onchange="generarInventarioInputs()">
<option value="tortilla">Tortilla</option>
<option value="pastel">Pastel</option>
<option value="guiso">Guiso</option>
</select>

<label>% Devoluci√≥n</label>
<input type="number" id="devolucionInv">

<div id="inventarioInputs"></div>

<button onclick="calcularInventarioSimulado()">Calcular</button>
<div id="resultadoInv" class="result"></div>
</div>

</section>

</div>

<script>
// ===== CAMBIO DE SECCIONES =====
function mostrarSeccion(id){
  document.getElementById("calc").style.display="none";
  document.getElementById("ciudades").style.display="none";
  document.getElementById(id).style.display="block";
}

// ===== BOTONES CORRECTOS =====
document.getElementById("btnCant").onclick = function(){
  document.getElementById("section-cantidad").style.display="block";
  document.getElementById("section-inventario").style.display="none";
};

document.getElementById("btnInv").onclick = function(){
  document.getElementById("section-cantidad").style.display="none";
  document.getElementById("section-inventario").style.display="block";
  generarInventarioInputs();
};

// ===== DATOS =====
const comidas={
  tortilla:{base:{Maiz:36,Cerdo:72}},
  pastel:{base:{Maiz:18,Harina:36,Cerdo:72}},
  guiso:{base:{Calabaza:36,Pan:36,Ternera:72}}
};

// ===== INVENTARIO =====
function generarInventarioInputs(){
  const cont=document.getElementById("inventarioInputs");
  cont.innerHTML="";
  const comida=document.getElementById("comidaInv").value;
  for(let ing in comidas[comida].base){
    let i=document.createElement("input");
    i.type="number";
    i.placeholder=ing+" disponible";
    i.id="inv_"+ing;
    cont.appendChild(i);
  }
}

function calcularInventarioSimulado(){
  const comida=document.getElementById("comidaInv").value;
  const dev=(parseFloat(document.getElementById("devolucionInv").value)||0)/100;
  let base=comidas[comida].base;
  let max=Infinity;

  for(let ing in base){
    let have=parseFloat(document.getElementById("inv_"+ing).value)||0;
    max=Math.min(max,Math.floor(have/(base[ing]*(1-dev))));
  }
  document.getElementById("resultadoInv").innerHTML="Puedes craftear: <b>"+(max*10)+"</b>";
}

function calcularCantidad(){
  const comida=document.getElementById("comidaCant").value;
  const cant=parseInt(document.getElementById("cantidadCant").value);
  const dev=(parseFloat(document.getElementById("devolucionCant").value)||0)/100;
  let out="";
  for(let ing in comidas[comida].base){
    out+=`${ing}: ${(comidas[comida].base[ing]/10*cant*(1-dev)).toFixed(2)}<br>`;
  }
  document.getElementById("resultadoCant").innerHTML=out;
}

// ===== BONOS POR CIUDADES =====
const bonosCiudad={
  brecilien:"Bono de crafteo: Bolsas y capas",
  caerleon:"Producci√≥n: Consuelda, Cardo drag√≥n, Gordolobo +10%<br>Fabricaci√≥n: equipo recolecci√≥n, herramientas, comida, guantes de guerra, bast√≥n cambiaformas +15%",
  thetford:"Producci√≥n: Ag√°rico, coles, gordolobo +10%<br>Refinaci√≥n: Mineral +40%",
  fortsterling:"Producci√≥n: huevos, r√°banos, leche oveja +10%<br>Refinaci√≥n: Madera +40%",
  lymhurst:"Producci√≥n: zanahoria, bardana, huevos ganso +10%<br>Refinaci√≥n: Fibra +40%",
  bridgewatch:"Producci√≥n: frijoles, leche cabra +10%<br>Refinaci√≥n: Piedra +40%",
  martlock:"Producci√≥n: trigo, patata +10%<br>Refinaci√≥n: Piel +40%"
};

function mostrarBonoCiudad(){
  const c=document.getElementById("ciudadSelect").value;
  document.getElementById("resultadoCiudad").innerHTML=bonosCiudad[c]||"";
}
</script>

</body>
</html>
